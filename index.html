<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Inventario de Equipos</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
  <style>
    table, th, td {
      border: 1px solid #ccc;
      border-collapse: collapse;
      padding: 6px;
      font-size: 13px;
    }
    input[type="text"] {
      width: 100%;
    }
    #reader {
      width: 300px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h2>Inventario de Equipos</h2>
  <table id="tabla">
    <thead>
      <tr>
        <th>Estado</th>
        <th>Host</th>
        <th>IP</th>
        <th>Último Usuario</th>
        <th>Serial Equipo</th>
        <th>Tipo</th>
        <th>Zona</th>
        <th>Serial Monitor (Escanear)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>En línea</td>
        <td>DAGMAR-PORT</td>
        <td>1921681143</td>
        <td>PLENITUDE\dmetelkova</td>
        <td>3JVB8S3</td>
        <td>Laptop</td>
        <td>ENI PLENITUDE RENEWABLES SPAIN S.L</td>
        <td><input type="text" id="monitor-0" placeholder="Escanea aquí"></td>
      </tr>
      <tr>
        <td>En línea</td>
        <td>DESKTOP-OTTB1J6</td>
        <td>192168112</td>
        <td>PLENITUDE\poberling</td>
        <td>K1NXGR00017102D</td>
        <td>Laptop</td>
        <td>ENI PLENITUDE RENEWABLES SPAIN S.L</td>
        <td><input type="text" id="monitor-1" placeholder="Escanea aquí"></td>
      </tr>
      <!-- Continúa con las siguientes 48 filas en el mismo formato -->
    </tbody>
  </table>

  <h3>Escáner QR</h3>
  <div id="reader"></div>

  <script>
    let currentInputId = null;

    document.querySelectorAll("input[id^='monitor-']").forEach(input => {
      input.addEventListener("focus", () => {
        currentInputId = input.id;
      });
    });

    const html5QrCode = new Html5Qrcode("reader");

    function onScanSuccess(decodedText) {
      if (currentInputId) {
        document.getElementById(currentInputId).value = decodedText;
      }
    }

    Html5Qrcode.getCameras().then(cameras => {
      if (cameras && cameras.length) {
        const backCam = cameras.find(c => c.label.toLowerCase().includes("back")) || cameras[0];
        html5QrCode.start(backCam.id, { fps: 10, qrbox: 250 }, onScanSuccess);
      }
    }).catch(err => {
      console.error("Error al acceder a la cámara: ", err);
    });
  </script>
</body>
</html>
